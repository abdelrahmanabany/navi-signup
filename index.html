<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Navi - AI Study Assistant</title>
    <link rel="icon" type="image/png" href="./favicon.png" />
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <main class="page">

      <section class="left">
        <div class="brand">
          <img src="./navi-logo.png" alt="Navi logo" />
        </div>

        <h1 class="headline">
          STUDY SMARTER.<br />
          UNDERSTAND FASTER.
        </h1>

        <div class="points">
          <div class="point">
            <h3>Course-based setup</h3>
            <p>Your semester stays organized by course, not by random tabs and screenshots.</p>
          </div>

          <div class="point">
            <h3>Multiple study modes</h3>
            <p>Some days you need a clear explanation. Other days you need questions to test yourself. NAVI lets you study the way that works for you.</p>
          </div>

          <div class="point">
            <h3>Assignment support</h3>
            <p>Finish assignments faster with clear guidance that makes the work make sense.</p>
          </div>

          <div class="point">
            <h3>Group channels</h3>
            <p>No more messy group chats. One channel for studying and group work, plus summarize help to clarify, summarize, and keep things moving.</p>
          </div>

          <div class="point">
            <h3>Personalized guidance</h3>
            <p>See your progress clearly, so you know what is done, what is shaky, and what still needs work.</p>
          </div>
        </div>
      </section>

      <section class="right">
        <div class="signup-card" id="signupCard">

          <div class="card-content" id="cardContent">
            <h2 class="card-title">SIGN UP</h2>
            <p class="card-subtitle">First 20 subscribers get 1 year of Navi for free</p>

            <form class="signup-form" id="signupForm" autocomplete="off">
              <div class="name-row">
                <input class="field" type="text" name="firstName" placeholder="First Name" required />
                <input class="field" type="text" name="lastName" placeholder="Last Name" required />
              </div>
              <input class="field" type="email" name="email" placeholder="Email" required />
              <!-- Honeypot field - hidden from users, catches bots -->
              <input type="text" name="website" style="position:absolute;left:-9999px;opacity:0;height:0;" tabindex="-1" autocomplete="off" />
              <button class="cta" type="submit">Sign Up</button>
            </form>
          </div>

          <div class="success-message" id="successMessage">
            Thanks for signing up for early access to Navi!
          </div>

        </div>
      </section>

    </main>

    <script>
      const API_URL = "https://navi-signup-api.abdelrahmanabany.workers.dev";

      const form = document.getElementById("signupForm");
      const card = document.getElementById("signupCard");
      const submitBtn = form.querySelector('button[type="submit"]');

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const firstName = form.firstName.value.trim();
        const lastName = form.lastName.value.trim();
        const email = form.email.value.trim();
        const website = form.website.value; // Honeypot

        // Disable button while submitting
        submitBtn.disabled = true;
        submitBtn.textContent = "Signing up...";

        try {
          const response = await fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ firstName, lastName, email, website })
          });

          const data = await response.json();

          if (response.ok) {
            card.classList.add("is-success");
          } else {
            alert(data.error || "Something went wrong. Please try again.");
            submitBtn.disabled = false;
            submitBtn.textContent = "Sign Up";
          }
        } catch (error) {
          alert("Network error. Please check your connection and try again.");
          submitBtn.disabled = false;
          submitBtn.textContent = "Sign Up";
        }
      });
    </script>
  </body>
</html>
